<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="theme-color" content="#0A0A0A">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Портфолио — Князев ПРО</title>
    <link rel="stylesheet" href="assets/styles.css">
  </head>
  <body class="theme-dark">
    <header class="contact-header">
      <nav class="contact-nav container">
        <div class="contact-brand">
          <a href="index.html">
            <img src="assets/img/logo _ pattern/raster/png/full version beige small.png" alt="Князев ПРО" class="contact-logo">
          </a>
        </div>
        <button class="mobile-menu-toggle" aria-label="Меню" id="mobileMenuToggle">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <ul class="nav-menu" id="navMenu">
          <li><a href="index.html">Главное</a></li>
          <li><a href="portfolio.html">Портфолио</a></li>
          <li><a href="price.html">Цены</a></li>
          <li><a href="founder.html">Алексей Князев</a></li>
          <li><a href="contact.html">Контакты</a></li>
        </ul>
      </nav>
    </header>
    
    <header class="container">
      <h1 style="text-align:center;font-size:48px;margin-bottom:24px">ПОРТФОЛИО</h1>
      <div style="text-align:center;margin-bottom:48px">
        <img src="assets/img/logo _ pattern/raster/png/pattern white small.png" alt="Князев ПРО" style="height:40px;width:auto;opacity:0.3">
      </div>
      <div class="case-filters">
        <button data-filter="industry" class="active">
          <img src="assets/img/logo _ pattern/raster/png/logo_beige_small.png" alt="">
          PRESENTATION
        </button>
        <button data-filter="brand">
          <img src="assets/img/logo _ pattern/raster/png/logo_beige_small.png" alt="">
          BRAND FILMS
        </button>
        <button data-filter="events">
          <img src="assets/img/logo _ pattern/raster/png/logo_beige_small.png" alt="">
          EVENT
        </button>
        <button data-filter="travel">
          <img src="assets/img/logo _ pattern/raster/png/logo_beige_small.png" alt="">
          TRAVEL
        </button>
        <button data-filter="sport">
          <img src="assets/img/logo _ pattern/raster/png/logo_beige_small.png" alt="">
          SPORT CAR
        </button>
        <button data-filter="pr">
          <img src="assets/img/logo _ pattern/raster/png/logo_beige_small.png" alt="">
          PR
        </button>
        <button data-filter="new">
          <img src="assets/img/logo _ pattern/raster/png/logo_beige_small.png" alt="">
          NEW PROJECTS
        </button>
        <button data-filter="all">
          <img src="assets/img/logo _ pattern/raster/png/logo_beige_small.png" alt="">
          ALL PROJECTS
        </button>
      </div>
    </header>
    <main class="container">
      <div class="case-list" id="portfolioList"></div>
    </main>
    <script>
      // Берём сегменты из главной
      const fromHome = sessionStorage.getItem('videoSegments');
      let segments = fromHome ? JSON.parse(fromHome) : {};
      
      // Fallback данные если sessionStorage пустой
      if (Object.keys(segments).length === 0) {
        console.log('No segments in sessionStorage, using fallback data');
        // industry по умолчанию, all в конце для оптимизации
        segments = {
          industry: [                              // Производство/Industry
            'dcf1e99b5d0d0c9705a1b097fa691689',
            'e940e0fa8f703a920ca2f4b8f15dff43',
            'd98b1c27e63466a12fe3026a72a9cf0b',
            '9935e7033fdff417efc6fb0c4ef906eb',
            '2620229e172a5d2172778e673e98f0ce',
            'e22cdc6831b09a7c0fa5a962ee36cc6f',
            '544d970dc02a6dc2d96255b1f79d38aa',
            'c66903c6fd67a9bef55c3915db46ad05',
            '57aac7897318d9d12d4d10c33ccd996e',
            'a8efb366f4910b22fc68d2cd22b3db08',
            'e8a1d38afabc62bde9857357c1a97315',
            'af38430a9e2673028a48d9b7d9b53c9a',
            'e70f39116df886968e3be00183c3e44b'
          ],
          brand: [                                // Brand Films/Презентация о компании
            'bd567efa5f684a9ff002b6d9f131f5c0',
            '544d970dc02a6dc2d96255b1f79d38aa',
            '74cffbbaef5caf1043813eb5e9c4362f',
            'f80f3e1fd5e95a340d7fdfc2d7c88d99',
            'e22cdc6831b09a7c0fa5a962ee36cc6f',
            '57aac7897318d9d12d4d10c33ccd996e',
            'a8efb366f4910b22fc68d2cd22b3db08',
            'e940e0fa8f703a920ca2f4b8f15dff43',
            'ee6c7615808b67c9bab912839a5e7f57',
            '8d6a630f18044da9d67f7514b2e810f6',
            'dcf1e99b5d0d0c9705a1b097fa691689',
            '73ef71914b1e8963aa77470a008177f0',
            'e70f39116df886968e3be00183c3e44b',
            'e8a1d38afabc62bde9857357c1a97315',
            'af38430a9e2673028a48d9b7d9b53c9a'
          ],
          events: [                               // Event/мероприятия
            'ec6f206f3445b09929373ad404bff3b7',
            'd03501b3fd1be1ee5a4edb9e8584108c',
            '39d6b75a64428d4780e7401753e2c168',
            '26337a5b6f4bd39c6c09c55d952c3258',
            '74cffbbaef5caf1043813eb5e9c4362f',
            '14f3935da1db9f67ab243c1b8ba14d52',
            '22b617ed91972e1294b1da31d37c0e1f',
            '3a5bf44c15d8126813c82b48c9076440',
            '1532f8781bb990992105095b41b2c137',
            'cd7e38638c9a578ec2f9dfda64c6df3a'
          ],
          travel: [                               // Travel/Путешествия
            '3a5bf44c15d8126813c82b48c9076440',
            'efa5b2fd7db2dd99eaeaff3dcfc901c1',
            '20a5a6f6e6cd53ab7c1c0c3de7a6eab9',
            '47dcb638a7d00a1d9f674c0b905c5be4',
            'b918021f6cb0962e465b0ba0adf57a76'
          ],
          sport: [                                // Sport car/Авто
            '1532f8781bb990992105095b41b2c137',
            '4907656e12e52aa5afb47ea0b656140d',
            'bf373100ce030e8e61c9a99c470edadc',
            '544d970dc02a6dc2d96255b1f79d38aa',
            'b918021f6cb0962e465b0ba0adf57a76',
            '8f9da5b32c206451bef89155a703f860',
            'e22cdc6831b09a7c0fa5a962ee36cc6f',
            '4c2a97327d3147bf79be95b3b37bd4da'
          ],
          pr: [                                   // PR/Имиджевая реклама
            'e348029d9b7f531396ea9aee45274dd9',
            'b46817a47f3796204dfd06b814c25e17',
            'd22b38eef78a151f8626be672dc572c5',
            'bf373100ce030e8e61c9a99c470edadc',
            'cd7e38638c9a578ec2f9dfda64c6df3a',
            'e940e0fa8f703a920ca2f4b8f15dff43',
            'd98b1c27e63466a12fe3026a72a9cf0b',
            '8d6a630f18044da9d67f7514b2e810f6',
            'bd567efa5f684a9ff002b6d9f131f5c0',
            '29e435126a3e109d14ac3a4456454933',
            '57aac7897318d9d12d4d10c33ccd996e',
            '22b617ed91972e1294b1da31d37c0e1f',
            '2620229e172a5d2172778e673e98f0ce',
            '74cffbbaef5caf1043813eb5e9c4362f',
            '9935e7033fdff417efc6fb0c4ef906eb',
            'a7d34dd4befbec9a8a331d2abd800a5c',
            'b2014bcad200196454a25c40ce93e7d0',
            'b918021f6cb0962e465b0ba0adf57a76',
            'd03501b3fd1be1ee5a4edb9e8584108c',
            'e22cdc6831b09a7c0fa5a962ee36cc6f'
          ],
          other: [],                              // Пока пусто - ждем список ID
          new: [],                                // Новые работы
          all: [
            '74cffbbaef5caf1043813eb5e9c4362f', 'b46817a47f3796204dfd06b814c25e17', 'b918021f6cb0962e465b0ba0adf57a76',
            'c66903c6fd67a9bef55c3915db46ad05', 'dcf1e99b5d0d0c9705a1b097fa691689', 'a5b6f4bd39c6c09c55d952c325875781',
            'e940e0fa8f703a920ca2f4b8f15dff43', '8d6a630f18044da9d67f7514b2e810f6', 'af38430a9e2673028a48d9b7d9b53c9a',
            'a8efb366f4910b22fc68d2cd22b3db08', 'e8a1d38afabc62bde9857357c1a97315', '39d6b75a64428d4780e7401753e2c168',
            '29e435126a3e109d14ac3a4456454933', '57aac7897318d9d12d4d10c33ccd996e', 'd22b38eef78a151f8626be672dc572c5',
            'e70f39116df886968e3be00183c3e44b', 'd03501b3fd1be1ee5a4edb9e8584108c', '73ef71914b1e8963aa77470a008177f0',
            'ee6c7615808b67c9bab912839a5e7f57', '22b617ed91972e1294b1da31d37c0e1f', 'e22cdc6831b09a7c0fa5a962ee36cc6f',
            '4c2a97327d3147bf79be95b3b37bd4da', 'f80f3e1fd5e95a340d7fdfc2d7c88d99', '14f3935da1db9f67ab243c1b8ba14d52',
            'b2014bcad200196454a25c40ce93e7d0', 'ec6f206f3445b09929373ad404bff3b7', '8f9da5b32c206451bef89155a703f860',
            '2620229e172a5d2172778e673e98f0ce', '544d970dc02a6dc2d96255b1f79d38aa', '9935e7033fdff417efc6fb0c4ef906eb',
            'a7d34dd4befbec9a8a331d2abd800a5c', 'cd7e38638c9a578ec2f9dfda64c6df3a', 'bf373100ce030e8e61c9a99c470edadc',
            '47dcb638a7d00a1d9f674c0b905c5be4', '4907656e12e52aa5afb47ea0b656140d', 'bd567efa5f684a9ff002b6d9f131f5c0',
            '20a5a6f6e6cd53ab7c1c0c3de7a6eab9', '1532f8781bb990992105095b41b2c137', 'efa5b2fd7db2dd99eaeaff3dcfc901c1',
            'd25ee5555f677a89edcbfb09ab3c697d', 'e348029d9b7f531396ea9aee45274dd9', 'd98b1c27e63466a12fe3026a72a9cf0b',
            '3a5bf44c15d8126813c82b48c9076440', '36592b40dce5eb6c43c6ef77b95539e3', '26337a5b6f4bd39c6c09c55d952c3258'
          ],
          industry: [                              // Производство/Industry
            'dcf1e99b5d0d0c9705a1b097fa691689',
            'e940e0fa8f703a920ca2f4b8f15dff43',
            'd98b1c27e63466a12fe3026a72a9cf0b',
            '9935e7033fdff417efc6fb0c4ef906eb',
            '2620229e172a5d2172778e673e98f0ce',
            'e22cdc6831b09a7c0fa5a962ee36cc6f',
            '544d970dc02a6dc2d96255b1f79d38aa',
            'c66903c6fd67a9bef55c3915db46ad05',
            '57aac7897318d9d12d4d10c33ccd996e',
            'a8efb366f4910b22fc68d2cd22b3db08',
            'e8a1d38afabc62bde9857357c1a97315',
            'af38430a9e2673028a48d9b7d9b53c9a',
            'e70f39116df886968e3be00183c3e44b'
          ],
          brand: [                                // Brand Films/Презентация о компании
            'bd567efa5f684a9ff002b6d9f131f5c0',
            '544d970dc02a6dc2d96255b1f79d38aa',
            '74cffbbaef5caf1043813eb5e9c4362f',
            'f80f3e1fd5e95a340d7fdfc2d7c88d99',
            'e22cdc6831b09a7c0fa5a962ee36cc6f',
            '57aac7897318d9d12d4d10c33ccd996e',
            'a8efb366f4910b22fc68d2cd22b3db08',
            'e940e0fa8f703a920ca2f4b8f15dff43',
            'ee6c7615808b67c9bab912839a5e7f57',
            '8d6a630f18044da9d67f7514b2e810f6',
            'dcf1e99b5d0d0c9705a1b097fa691689',
            '73ef71914b1e8963aa77470a008177f0',
            'e70f39116df886968e3be00183c3e44b',
            'e8a1d38afabc62bde9857357c1a97315',
            'af38430a9e2673028a48d9b7d9b53c9a'
          ],
          events: [                               // Event/мероприятия
            'ec6f206f3445b09929373ad404bff3b7',
            'd03501b3fd1be1ee5a4edb9e8584108c',
            '39d6b75a64428d4780e7401753e2c168',
            '26337a5b6f4bd39c6c09c55d952c3258',
            '74cffbbaef5caf1043813eb5e9c4362f',
            '14f3935da1db9f67ab243c1b8ba14d52',
            '22b617ed91972e1294b1da31d37c0e1f',
            '3a5bf44c15d8126813c82b48c9076440',
            '1532f8781bb990992105095b41b2c137',
            'cd7e38638c9a578ec2f9dfda64c6df3a'
          ],
          travel: [                               // Travel/Путешествия
            '3a5bf44c15d8126813c82b48c9076440',
            'efa5b2fd7db2dd99eaeaff3dcfc901c1',
            '20a5a6f6e6cd53ab7c1c0c3de7a6eab9',
            '47dcb638a7d00a1d9f674c0b905c5be4',
            'b918021f6cb0962e465b0ba0adf57a76'
          ],
          sport: [                                // Sport car/Авто
            '1532f8781bb990992105095b41b2c137',
            '4907656e12e52aa5afb47ea0b656140d',
            'bf373100ce030e8e61c9a99c470edadc',
            '544d970dc02a6dc2d96255b1f79d38aa',
            'b918021f6cb0962e465b0ba0adf57a76',
            '8f9da5b32c206451bef89155a703f860',
            'e22cdc6831b09a7c0fa5a962ee36cc6f',
            '4c2a97327d3147bf79be95b3b37bd4da'
          ],
          pr: [                                   // PR/Имиджевая реклама
            'e348029d9b7f531396ea9aee45274dd9',
            'b46817a47f3796204dfd06b814c25e17',
            'd22b38eef78a151f8626be672dc572c5',
            'bf373100ce030e8e61c9a99c470edadc',
            'cd7e38638c9a578ec2f9dfda64c6df3a',
            'e940e0fa8f703a920ca2f4b8f15dff43',
            'd98b1c27e63466a12fe3026a72a9cf0b',
            '8d6a630f18044da9d67f7514b2e810f6',
            'bd567efa5f684a9ff002b6d9f131f5c0',
            '29e435126a3e109d14ac3a4456454933',
            '57aac7897318d9d12d4d10c33ccd996e',
            '22b617ed91972e1294b1da31d37c0e1f',
            '2620229e172a5d2172778e673e98f0ce',
            '74cffbbaef5caf1043813eb5e9c4362f',
            '9935e7033fdff417efc6fb0c4ef906eb',
            'a7d34dd4befbec9a8a331d2abd800a5c',
            'b2014bcad200196454a25c40ce93e7d0',
            'b918021f6cb0962e465b0ba0adf57a76',
            'd03501b3fd1be1ee5a4edb9e8584108c',
            'e22cdc6831b09a7c0fa5a962ee36cc6f'
          ],
          other: [],    // Пока пусто - ждем список ID
          new: []       // Новые работы
        };
      }
      
      const list = document.getElementById('portfolioList');
      const filterBar = document.querySelector('.case-filters');
      
      // Отладочная информация
      console.log('Segments from sessionStorage:', segments);
      console.log('Number of segments:', Object.keys(segments).length);
      
      function render(){
        if(!list) return;
        list.innerHTML='';
        
        const entries = Object.entries(segments);
        // Рендерим по сегментам
        entries.forEach(([category, ids])=>{
          if(!ids || ids.length === 0) return;
          
            // Заголовки сегментов убраны - используются только фильтры
          
          // Видео сегмента
          ids.forEach((id)=>{
            const article=document.createElement('article');
            article.className='case-item';
            article.setAttribute('data-category', category);
            const video=document.createElement('div');
            video.className='case-video';
            const iframe=document.createElement('iframe');
            iframe.src=`https://rutube.ru/play/embed/${id}/`;
            iframe.allow='clipboard-write; autoplay';
            iframe.referrerPolicy='no-referrer-when-downgrade';
            iframe.allowFullscreen=true;
            video.appendChild(iframe);
            const content=document.createElement('div');
            content.className='case-content';
            // Создаем более информативные заголовки на основе категории
            const categoryTitles = {
              industry: 'ПРОМЫШЛЕННЫЙ ПРОЕКТ',
              brand: 'БРЕНД-ФИЛЬМ',
              events: 'ИВЕНТ-ВИДЕО',
              travel: 'TRAVEL-КОНТЕНТ',
              sport: 'АВТОМОБИЛЬНЫЙ ПРОЕКТ',
              pr: 'PR-ВИДЕО',
              other: 'ПРОЕКТ',
              new: 'НОВАЯ РАБОТА'
            };
            const title = categoryTitles[category] || 'ПРОЕКТ';
            content.innerHTML=`<h4>${title}</h4>`;
            article.appendChild(video);
            article.appendChild(content);
            list.appendChild(article);
          });
        });
      }
      render();

      // Проверяем URL-якорь для автоматического выбора фильтра
      const hash = window.location.hash.replace('#', '');
      const defaultFilter = hash && ['industry', 'brand', 'events', 'travel', 'sport', 'pr', 'new', 'all'].includes(hash) ? hash : 'industry';

      // Инициализация фильтра по умолчанию или из URL-якоря
      if(filterBar){
        const defaultBtn = filterBar.querySelector(`[data-filter="${defaultFilter}"]`);
        if(defaultBtn){
          // Убираем активный класс со всех кнопок
          filterBar.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
          // Добавляем активный класс к кнопке по умолчанию
          defaultBtn.classList.add('active');
          // Применяем фильтр
          const all = document.querySelectorAll('.case-item');
          all.forEach(card=>{
            const cat = card.getAttribute('data-category');
            card.style.display = (defaultFilter === 'all' || cat === defaultFilter) ? 'grid' : 'none';
          });
        }
      }

      // Фильтрация
      if(filterBar){
        filterBar.addEventListener('click', (e)=>{
          const btn = e.target.closest('button');
          if(!btn) return;
          filterBar.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          const f = btn.getAttribute('data-filter');
          const all = document.querySelectorAll('.case-item');
          all.forEach(card=>{
            const cat = card.getAttribute('data-category');
            card.style.display = (f==='all' || f===cat) ? 'grid' : 'none';
          });
        });
      }
    </script>

    <footer class="contact-footer">
      <div class="container social-wrap">
        <div class="social-icons">
          <a href="https://www.instagram.com/knyazev_pro/" target="_blank" aria-label="Instagram" class="social-link"><img src="assets/img/icon_socialmedia/icons8-instagram-500.png" alt="Instagram"></a>
          <a href="https://vimeo.com/knyazevpro" target="_blank" aria-label="Vimeo" class="social-link"><img src="assets/img/icon_socialmedia/icons8-vimeo-500 (1).png" alt="Vimeo"></a>
          <a href="https://t.me/knyazev_production" target="_blank" aria-label="Telegram" class="social-link"><img src="assets/img/icon_socialmedia/icons8-логотип-telegram-500 (1).png" alt="Telegram"></a>
          <a href="https://vk.com/knyazev_videopro" target="_blank" aria-label="VKontakte" class="social-link"><img src="assets/img/icon_socialmedia/icons8-vkontakte-100.png" alt="VKontakte"></a>
        </div>
        <div class="copyright">
          © <img src="assets/img/logo _ pattern/raster/png/full version white_small.png" alt="Князев ПРО" style="height:24px;width:auto;vertical-align:middle;margin-left:8px">
        </div>
      </div>
    </footer>

    <script src="assets/main.js" defer></script>
  </body>
  </html>


